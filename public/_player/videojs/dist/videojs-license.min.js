/*! @name videojs-license @version 0.1.0 @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsLicense=t(e.videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=t(e);const s=l.default.getPlugin("plugin"),n=l.default.getComponent("Component"),i=l.default.getComponent("MenuButton"),o={license:"none",title:"",author:"",languages:{license:"License",loading:"Loading"}};class c extends s{constructor(e,t){super(e),this.playerId=this.player.id(),this.options=l.default.mergeOptions(o,t),"none"!==t.license&&(e.addClass("vjs-license"),this.buildUI(),(l.default.browser.IS_IOS||l.default.browser.IS_ANDROID)&&this.mobileBuildUI(),this.player.on("userinactive",(()=>{document.getElementById(this.playerId).querySelectorAll(".vjs-menu").forEach((e=>{e.classList.remove("vjs-lock-open")}))})),this.player.on("click",(e=>{"VIDEO"===e.target.tagName&&document.getElementById(this.playerId).querySelectorAll(".vjs-menu").forEach((e=>{e.classList.remove("vjs-lock-open")}))})),this.player.on("loadstart",(e=>{this.removeElementsByClass("vjs-license-clear"),l.default.browser.IS_IOS||l.default.browser.IS_ANDROID?this.mobileBuildTopLevelMenu():this.buildTopLevelMenu()})))}buildUI(){const e=this.playerId,t=this;l.default.registerComponent("licenseMenuButton",class extends i{constructor(l,s){super(l,s),this.addClass("vjs-license"),this.controlText(t.options.languages.loading),l.one("canplaythrough",(e=>{this.controlText(t.options.languages.settings)})),this.menu.contentEl_.id=e+"-vjs-license-default"}handleClick(){l.default.browser.IS_IOS||l.default.browser.IS_ANDROID?this.player.getChild("licenseMenuMobileModal").el().style.display="block":(this.el().classList.toggle("vjs-toogle-btn"),this.menu.el().classList.toggle("vjs-lock-open"))}}),this.player.getChild("controlBar").addChild("licenseMenuButton"),this.player.getChild("controlBar").getChild("fullscreenToggle")&&this.player.getChild("controlBar").el().insertBefore(this.player.getChild("controlBar").getChild("licenseMenuButton").el(),this.player.getChild("controlBar").getChild("fullscreenToggle").el())}buildTopLevelMenu(){const e=this.player.getChild("controlBar").getChild("licenseMenuButton").menu.contentEl_;e.innerHTML="",e.classList.add("vjs-license-top-level");const t=document.createElement("li");t.className="vjs-license-top-level-header";const l=document.createElement("span");l.innerHTML="About",l.className="vjs-license-top-level-header-titel",t.appendChild(l),e.appendChild(t);const s=document.createElement("li");if(s.innerHTML=this.buildItemTitel(),s.className="vjs-license-top-level-item",e.appendChild(s),this.options.author){const t=document.createElement("li");t.innerHTML=this.buildItemAuthor(),t.className="vjs-license-top-level-item",e.appendChild(t)}const n=document.createElement("li");n.innerHTML=this.buildItemLicense(),n.className="vjs-license-top-level-item",e.appendChild(n)}mobileBuildUI(){l.default.registerComponent("licenseMenuMobileModal",class extends n{constructor(e,t){super(e,t)}createEl(){return l.default.createEl("div",{className:"vjs-license-mobile"})}}),l.default.dom.prependTo(this.player.addChild("licenseMenuMobileModal").el(),document.body)}mobileBuildTopLevelMenu(){const e=this.player.getChild("licenseMenuMobileModal"),t=document.createElement("ul");t.className="vjs-license-mob-top-level vjs-setting-menu-clear",e.el().appendChild(t);const l=document.createElement("li");l.innerHTML="About",l.className="vjs-setting-menu-mobile-top-header",t.appendChild(l);const s=document.createElement("li");if(s.innerHTML=this.buildItemTitel(),s.className="vjs-license-top-level-item",this.options.author){const e=document.createElement("li");e.innerHTML=this.buildItemAuthor(),e.className="vjs-license-top-level-item"}const n=document.createElement("li");n.innerHTML=this.buildItemLicense(),n.className="vjs-license-top-level-item";const i=document.createElement("li");i.innerHTML="Close",i.className="setting-menu-footer-default",i.onclick=e=>{this.player.getChild("settingsMenuMobileModal").el().style.display="none"},t.appendChild(i)}buildItemTitel(){let e="";return this.options.title&&(e=`${this.options.title}`),"Title: "+e}buildItemAuthor(){let e="";return this.options.author&&(e=` by ${this.options.author}`),"Author: "+e}buildItemLicense(){let e="";const t=new RegExp("[0-9]+.[0-9]+$");let l="4.0";const s=this.options.license.match(t);null!==s&&(l=s[0]);let n=null;switch(this.options.license.replace(t,"").trim()){case"CC0":n="https://creativecommons.org/licenses/zero/1.0/";break;case"CC BY":n=`https://creativecommons.org/licenses/by/${l}/`;break;case"CC BY-SA":n=`https://creativecommons.org/licenses/by-sa/${l}/`;break;case"CC BY-NC":n=`https://creativecommons.org/licenses/by-nc/${l}/`;break;case"CC BY-NC-SA":n=`https://creativecommons.org/licenses/by-nc-sa/${l}/`;break;case"CC BY-ND":n=`https://creativecommons.org/licenses/by-nd/${l}/`;break;case"CC BY-NC-ND":n=`https://creativecommons.org/licenses/by-nc-nd/${l}/`}return e=n?`<a href='${n}' onclick='window.open('${n}')' target='_blank' rel='noopener'>${this.options.license}</a>`:this.options.license,"License: "+e}removeElementsByClass(e){document.querySelectorAll(".vjs-sm-top-level").forEach((e=>{e.classList.remove("vjs-hidden")}));const t=document.getElementsByClassName(e);for(;t.length>0;)t[0].parentNode.removeChild(t[0])}}return c.defaultState={},c.VERSION="0.1.0",l.default.registerPlugin("license",c),c}));
